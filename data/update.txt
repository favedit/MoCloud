-- 150904 增加用户身份证号
ALTER TABLE DT_PSN_USER ADD ID_CARD VARCHAR(40)       AFTER CONTACT_MAIL_VERIFY_CD;
ALTER TABLE DT_PSN_USER ADD ID_CARD_VERIFY_CD INTEGER AFTER ID_CARD;

-- 150912 增加统计表
ALTER TABLE ST_FIN_MARKETER ADD DEPARTMENT_LEVEL1_ID    BIGINT      AFTER DEPARTMENT_LABEL;
ALTER TABLE ST_FIN_MARKETER ADD DEPARTMENT_LEVEL1_LABEL VARCHAR(80) AFTER DEPARTMENT_LEVEL1_ID;

ALTER TABLE ST_FIN_MARKETER ADD DEPARTMENT_LEVEL2_ID    BIGINT      AFTER DEPARTMENT_LEVEL1_LABEL;
ALTER TABLE ST_FIN_MARKETER ADD DEPARTMENT_LEVEL2_LABEL VARCHAR(80) AFTER DEPARTMENT_LEVEL2_ID;

ALTER TABLE ST_FIN_MARKETER ADD DEPARTMENT_LEVEL3_ID    BIGINT      AFTER DEPARTMENT_LEVEL2_LABEL;
ALTER TABLE ST_FIN_MARKETER ADD DEPARTMENT_LEVEL3_LABEL VARCHAR(80) AFTER DEPARTMENT_LEVEL3_ID;

ALTER TABLE ST_FIN_MARKETER ADD DEPARTMENT_LEVEL4_ID    BIGINT      AFTER DEPARTMENT_LEVEL3_LABEL;
ALTER TABLE ST_FIN_MARKETER ADD DEPARTMENT_LEVEL4_LABEL VARCHAR(80) AFTER DEPARTMENT_LEVEL4_ID;

ALTER TABLE ST_FIN_MARKETER ADD DEPARTMENT_LEVEL5_ID    BIGINT      AFTER DEPARTMENT_LEVEL4_LABEL;
ALTER TABLE ST_FIN_MARKETER ADD DEPARTMENT_LEVEL5_LABEL VARCHAR(80) AFTER DEPARTMENT_LEVEL5_ID;

ALTER TABLE ST_FIN_MARKETER ADD DEPARTMENT_LEVEL6_ID    BIGINT      AFTER DEPARTMENT_LEVEL5_LABEL;
ALTER TABLE ST_FIN_MARKETER ADD DEPARTMENT_LEVEL6_LABEL VARCHAR(80) AFTER DEPARTMENT_LEVEL6_ID;

ALTER TABLE ST_FIN_MARKETER ADD DEPARTMENT_LEVEL7_ID    BIGINT      AFTER DEPARTMENT_LEVEL6_LABEL;
ALTER TABLE ST_FIN_MARKETER ADD DEPARTMENT_LEVEL7_LABEL VARCHAR(80) AFTER DEPARTMENT_LEVEL7_ID;

ALTER TABLE ST_FIN_MARKETER ADD DEPARTMENT_LEVEL8_ID    BIGINT      AFTER DEPARTMENT_LEVEL7_LABEL;
ALTER TABLE ST_FIN_MARKETER ADD DEPARTMENT_LEVEL8_LABEL VARCHAR(80) AFTER DEPARTMENT_LEVEL8_ID;

-- 150914 增加统计表
ALTER TABLE ST_FIN_CUSTOMER ADD INVESTMENT_FIRST_DATE DATETIME AFTER CARD;
ALTER TABLE ST_FIN_CUSTOMER ADD INVESTMENT_LAST_DATE  DATETIME AFTER INVESTMENT_FIRST_DATE;
ALTER TABLE ST_FIN_CUSTOMER ADD INVESTMENT_NUMBER     INTEGER  AFTER INVESTMENT_LAST_DATE;
ALTER TABLE ST_FIN_CUSTOMER ADD REDEMPTION_FIRST_DATE DATETIME AFTER INVESTMENT_TOTAL;
ALTER TABLE ST_FIN_CUSTOMER ADD REDEMPTION_LAST_DATE  DATETIME AFTER REDEMPTION_FIRST_DATE;
ALTER TABLE ST_FIN_CUSTOMER ADD REDEMPTION_NUMBER     INTEGER  AFTER REDEMPTION_LAST_DATE;

-- 150921 增加GPS坐标
USE EAI_CACHE;
ALTER TABLE CC_SYS_SESSION ADD LOCATION_LONGITUDE DOUBLE AFTER ROLE_MODULES;
ALTER TABLE CC_SYS_SESSION ADD LOCATION_LATITUDE  DOUBLE AFTER LOCATION_LONGITUDE;

USE EAI_DATA;
ALTER TABLE DT_COM_COUNTRY ADD LOCATION_LONGITUDE DOUBLE AFTER ICON_URL;
ALTER TABLE DT_COM_COUNTRY ADD LOCATION_LATITUDE  DOUBLE AFTER LOCATION_LONGITUDE;

USE EAI_LOGGER;
ALTER TABLE LG_PSN_USER_ACCESS ADD LOCATION_LONGITUDE DOUBLE AFTER PAGE_INFO;
ALTER TABLE LG_PSN_USER_ACCESS ADD LOCATION_LATITUDE  DOUBLE AFTER LOCATION_LONGITUDE;

-- 150922 增加日志新表
ADD TABLE LG_SYS_LOGGER;
ADD TABLE LG_SYS_EXCEPTION;

-- 150921 增加统计信息
USE EAI_STATISTICS;
ALTER TABLE ST_FIN_DYNAMIC ADD TENDER_CHANGED       TINYINT     AFTER CUSTOMER_ACTION_INTEREST;
ALTER TABLE ST_FIN_DYNAMIC ADD TENDER_PRIOR_ID      BIGINT      AFTER TENDER_CHANGED;
ALTER TABLE ST_FIN_DYNAMIC ADD TENDER_PRIOR_LINK_ID BIGINT      AFTER TENDER_PRIOR_ID;
ALTER TABLE ST_FIN_DYNAMIC ADD TENDER_PRIOR_MODEL   VARCHAR(20) AFTER TENDER_PRIOR_LINK_ID;

ALTER TABLE ST_FIN_CUSTOMER ADD TENDER_ID      BIGINT      AFTER PERFORMANCE_TOTAL;
ALTER TABLE ST_FIN_CUSTOMER ADD TENDER_LINK_ID BIGINT      AFTER TENDER_ID;
ALTER TABLE ST_FIN_CUSTOMER ADD TENDER_MODEL   VARCHAR(20) AFTER TENDER_LINK_ID;

-- 150924 修改理财师成员的外键 sunhr
ALTER TABLE DT_FIN_MARKETER_MEMBER DROP FOREIGN KEY DT_FIN_MKT_MEM_FK_CUS;
ALTER TABLE DT_FIN_MARKETER_MEMBER CHANGE CUSTOMER_ID MEMBER_ID BIGINT(20) AFTER MARKETER_ID;
ALTER TABLE DT_FIN_MARKETER_MEMBER ADD CONSTRAINT DT_FIN_MKT_MEM_FK_MER FOREIGN KEY (MEMBER_ID) REFERENCES DT_FIN_MEMBER(OUID); 

-- 150925 修改投资项目统计表
ALTER TABLE ST_FIN_TENDER ADD BEGIN_DATE            DATETIME AFTER LABEL;
ALTER TABLE ST_FIN_TENDER ADD END_DATE              DATETIME AFTER BEGIN_DATE;
ALTER TABLE ST_FIN_TENDER ADD INVESTMENT_USER_COUNT INTEGER AFTER INVESTMENT_COUNT;
ALTER TABLE ST_FIN_TENDER ADD REDEMPTION_BEGIN_DATE DATETIME AFTER INVESTMENT_TOTAL;
ALTER TABLE ST_FIN_TENDER ADD REDEMPTION_END_DATE   DATETIME AFTER REDEMPTION_BEGIN_DATE;
ALTER TABLE ST_FIN_TENDER ADD REDEMPTION_USER_COUNT DATETIME AFTER REDEMPTION_COUNT;

-- 151005 修改统计表
ALTER TABLE ST_FIN_MEMBER ADD PHONE_CITY_ID   BIGINT      AFTER PHONE;
ALTER TABLE ST_FIN_MEMBER ADD PHONE_CITY_CODE VARCHAR(40) AFTER PHONE_CITY_ID;
ALTER TABLE ST_FIN_MEMBER ADD REDEMPTION_DATE DATETIME    AFTER INVESTMENT_DATE;

ALTER TABLE ST_FIN_CUSTOMER ADD ST_FIN_CUSTOMER DATETIME AFTER CARD;

ALTER TABLE ST_FIN_MARKETER ADD ST_FIN_CUSTOMER DATETIME AFTER PERFORMANCE_TOTAL;
